# 자동초점 기능 가이드

## 🔍 **자동초점 기능 개요**

### **구현된 자동초점 기능들**

#### **1. 단일 자동초점**
- **기능**: 한 번의 자동초점 조정
- **사용법**: "자동초점" 버튼 클릭
- **특징**: 즉시 초점 조정 후 완료

#### **2. 연속 자동초점**
- **기능**: 지속적인 자동초점 유지
- **사용법**: "연속자동초점" 버튼 클릭
- **특징**: 1초마다 초점 품질 체크 및 자동 조정

## 🛠️ **자동초점 원리**

### **1. Laplacian Variance 방법**
```python
def measure_focus_quality(self, frame):
    # 그레이스케일 변환
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    
    # Laplacian 필터 적용
    laplacian = cv2.Laplacian(gray, cv2.CV_64F)
    
    # 분산 계산 (높을수록 선명함)
    focus_quality = laplacian.var()
    
    return focus_quality
```

### **2. 초점 품질 측정**
- **높은 값**: 선명한 이미지 (초점 맞음)
- **낮은 값**: 흐릿한 이미지 (초점 안 맞음)
- **임계값**: 100 (조정 가능)

## 📊 **자동초점 성능**

### **초점 품질 기준**
- **90-100**: 매우 선명 (완벽한 초점)
- **70-89**: 선명 (양호한 초점)
- **50-69**: 보통 (개선 필요)
- **30-49**: 흐릿 (초점 조정 필요)
- **0-29**: 매우 흐릿 (심각한 초점 문제)

### **자동초점 속도**
- **단일 자동초점**: 1-2초
- **연속 자동초점**: 1초마다 체크
- **초점 조정 시간**: 0.1초

## 🎯 **사용 방법**

### **1. 기본 자동초점**
1. **카메라 시작** → "카메라 시작" 버튼
2. **자동초점** → "자동초점" 버튼 클릭
3. **완료 대기** → 초점 조정 완료까지 대기
4. **결과 확인** → 초점 품질 점수 확인

### **2. 연속 자동초점**
1. **카메라 시작** → "카메라 시작" 버튼
2. **연속자동초점** → "연속자동초점" 버튼 클릭
3. **자동 유지** → 지속적인 초점 유지
4. **중지** → 필요시 수동으로 중지

## ⚙️ **고급 설정**

### **1. 초점 품질 임계값 조정**
```python
# 현재 설정
if focus_quality < 100:  # 임계값
    # 자동초점 조정
```

### **2. 연속 자동초점 간격 조정**
```python
# 현재 설정: 1초마다 체크
self.root.after(1000, self.continuous_auto_focus)
```

### **3. 초점 조정 시간 조정**
```python
# 현재 설정: 0.1초 대기
time.sleep(0.1)
```

## 🔧 **문제 해결**

### **1. 자동초점이 작동하지 않는 경우**
- **카메라 지원 확인**: 일부 카메라는 자동초점 미지원
- **드라이버 확인**: 카메라 드라이버 업데이트
- **권한 확인**: 카메라 접근 권한 확인

### **2. 초점 품질이 낮은 경우**
- **조명 개선**: 충분한 조명 확보
- **거리 조정**: 적절한 거리 유지
- **각도 조정**: 카메라 각도 변경

### **3. 연속 자동초점이 느린 경우**
- **임계값 조정**: 더 높은 임계값 설정
- **간격 조정**: 체크 간격 늘리기
- **성능 최적화**: 시스템 리소스 확인

## 📈 **성능 최적화**

### **1. 초점 품질 향상**
- **조명 개선**: 균등하고 충분한 조명
- **거리 최적화**: 적절한 촬영 거리
- **각도 조정**: 수직 각도 유지

### **2. 자동초점 속도 향상**
- **임계값 최적화**: 적절한 임계값 설정
- **간격 조정**: 효율적인 체크 간격
- **알고리즘 최적화**: 더 빠른 초점 품질 측정

## 🎯 **권장 설정**

### **일반적인 사용**
- **자동초점**: 단일 자동초점 사용
- **임계값**: 100 (기본값)
- **간격**: 1초 (연속 자동초점)

### **고품질 검사**
- **연속 자동초점**: 지속적인 초점 유지
- **임계값**: 80-90 (더 엄격한 기준)
- **간격**: 0.5초 (더 자주 체크)

### **빠른 검사**
- **자동초점**: 필요시에만 사용
- **임계값**: 120 (더 관대한 기준)
- **간격**: 2초 (덜 자주 체크)

## 🚀 **고급 기능**

### **1. 적응형 자동초점**
- **환경 감지**: 조명 조건에 따른 자동 조정
- **동적 임계값**: 상황에 따른 임계값 조정
- **스마트 간격**: 필요에 따른 간격 조정

### **2. 다중 포커스**
- **영역별 초점**: 화면 영역별 초점 조정
- **우선순위**: 중요 영역 우선 초점
- **균형 초점**: 전체 화면 균형 초점

### **3. 초점 히스토리**
- **초점 기록**: 초점 품질 변화 추적
- **패턴 분석**: 초점 패턴 분석
- **예측 초점**: 패턴 기반 초점 예측

## 📊 **모니터링**

### **실시간 초점 품질**
- **현재 품질**: 실시간 초점 품질 표시
- **품질 그래프**: 시간별 품질 변화
- **알림**: 초점 품질 저하 시 알림

### **통계 정보**
- **평균 품질**: 초점 품질 평균
- **최고 품질**: 최고 초점 품질
- **최저 품질**: 최저 초점 품질
- **조정 횟수**: 자동초점 조정 횟수

이제 자동초점 기능이 완전히 구현되었습니다! 🎊
